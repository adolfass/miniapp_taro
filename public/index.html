<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Tarot Mini App</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Cinzel:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
  <div id="app">
    <!-- –§–æ–Ω —Å–æ –∑–≤—ë–∑–¥–∞–º–∏ -->
    <canvas id="stars-canvas"></canvas>
    
    <!-- Canvas –¥–ª—è —á–∞—Å—Ç–∏—Ü -->
    <canvas id="particles-canvas"></canvas>
    
    <!-- –ó–∞—Ç–µ–º–Ω–µ–Ω–∏–µ —Ñ–æ–Ω–∞ –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç–µ -->
    <div class="card-overlay" id="card-overlay"></div>

    <!-- –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω: –∫–æ–ª–æ–¥–∞ -->
    <section id="screen-main" class="screen active">
      <div class="settings-btn" id="settings-btn">
        <svg viewBox="0 0 24 24" fill="currentColor" width="28" height="28">
          <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
      </div>
      
      <h1 class="title golden-title">–ó–æ–ª–æ—Ç–æ–µ –¢–∞—Ä–æ</h1>
      
      <p class="hint shuffle-hint" id="shuffle-hint">–ö–æ—Å–Ω–∏—Ç–µ—Å—å –∫–æ–ª–æ–¥—ã –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–æ–≤–∫–∏ –∫–∞—Ä—Ç</p>
      
      <div class="deck-container" id="deck-container">
        <div class="card-back" id="deck-card"></div>
      </div>
      
      <div class="shuffle-timer" id="shuffle-timer" style="display: none;">6</div>
    </section>

    <!-- –≠–∫—Ä–∞–Ω –≤—ã–±–æ—Ä–∞ —Ä–∞—Å–∫–ª–∞–¥–∞ -->
    <section id="screen-spreads" class="screen">
      <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–∞—Å–∫–ª–∞–¥</h2>
      
      <div class="spread-options">
        <button class="spread-btn" id="daily-spread-btn">
          <span class="spread-icon">‚òÄÔ∏è</span>
          <span class="spread-name">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π</span>
          <span class="spread-desc">3 –∫–∞—Ä—Ç—ã</span>
        </button>
        
        <button class="spread-btn" id="situation-spread-btn">
          <span class="spread-icon">üåô</span>
          <span class="spread-name">–ù–∞ —Å–∏—Ç—É–∞—Ü–∏—é</span>
          <span class="spread-desc">7 –∫–∞—Ä—Ç</span>
        </button>
      </div>
      
      <button class="back-btn" id="back-to-main-1">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –≠–∫—Ä–∞–Ω –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ —Ä–∞—Å–∫–ª–∞–¥–∞ -->
    <section id="screen-daily" class="screen">
      <h2 class="screen-title">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π —Ä–∞—Å–∫–ª–∞–¥</h2>
      
      <div class="cards-container" id="daily-cards"></div>
      
      <div class="result-actions" id="daily-actions" style="display: none;">
        <button class="share-btn" id="daily-share-btn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–∞—Ä–æ–ª–æ–≥–æ–º</button>
        <button class="new-spread-btn" id="daily-new-btn">üîÑ –ù–æ–≤—ã–π —Ä–∞—Å–∫–ª–∞–¥</button>
      </div>
      
      <button class="back-btn" id="back-to-spreads-1">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –≠–∫—Ä–∞–Ω —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é: –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—è -->
    <section id="screen-concentration" class="screen">
      <div class="concentration-header">
        <button class="description-btn" id="description-btn">üìñ –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∞</button>
      </div>
      
      <div class="concentration-container">
        <div class="hourglass" id="hourglass">
          <div class="hourglass-top">
            <div class="sand-top"></div>
          </div>
          <div class="hourglass-middle"></div>
          <div class="hourglass-bottom">
            <div class="sand-bottom"></div>
          </div>
        </div>
        
        <p class="concentration-text">–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –≤–∞—à–µ–º –≤–æ–ø—Ä–æ—Å–µ</p>
        <p class="timer-text" id="timer-text">7</p>
      </div>
      
      <button class="back-btn" id="back-to-spreads-2">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –≠–∫—Ä–∞–Ω —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é: –∞–∫—Ç–∏–≤–∞—Ü–∏—è -->
    <section id="screen-activation" class="screen">
      <div class="concentration-header">
        <button class="description-btn" id="description-btn-2">üìñ –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞—Å–∫–ª–∞–¥–∞</button>
      </div>
      
      <div class="activation-container">
        <p class="activation-text">–°–æ—Å—Ä–µ–¥–æ—Ç–æ—á—å—Ç–µ—Å—å –Ω–∞ –≤–æ–ø—Ä–æ—Å–µ –∏ —Å–¥–µ–ª–∞–π—Ç–µ —Ä–∞—Å–∫–ª–∞–¥</p>
        
        <div class="activation-buttons">
          <button class="activate-btn" id="activate-btn">‚ú® –°–¥–µ–ª–∞—Ç—å —Ä–∞—Å–∫–ª–∞–¥</button>
          <p class="shake-hint">–∏–ª–∏ –≤—Å—Ç—Ä—è—Ö–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω</p>
        </div>
      </div>
      
      <button class="back-btn" id="back-to-spreads-3">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞—Å–∫–ª–∞–¥–∞ -->
    <div class="modal" id="description-modal">
      <div class="modal-content modal-description">
        <h3 class="modal-title">–†–∞—Å–∫–ª–∞–¥ ¬´–ü—É—Ç—å¬ª</h3>
        <div class="modal-body" id="description-body">
          <!-- –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ description.js -->
        </div>
        <button class="modal-close" id="description-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>

    <!-- –≠–∫—Ä–∞–Ω —Ä–∞—Å–∫–ª–∞–¥–∞ –Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—é: –∫–∞—Ä—Ç—ã -->
    <section id="screen-situation" class="screen">
      <div class="situation-layout">
        <!-- –†—è–¥ 1: –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–∫–∞—Ä—Ç—ã 2 –∏ 7) -->
        <div class="situation-cards-row">
          <div class="situation-card-slot" data-index="1">
            <!-- –ö–∞—Ä—Ç–∞: –ü—Ä–æ—à–ª–æ–µ ‚Äî –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π -->
          </div>
          <div class="situation-card-slot" data-index="6">
            <!-- –ö–∞—Ä—Ç–∞: –ë—É–¥—É—â–µ–µ ‚Äî –º–µ–Ω—Ç–∞–ª—å–Ω—ã–π -->
          </div>
        </div>
        
        <!-- –†—è–¥ 2: –∞—Å—Ç—Ä–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å (–∫–∞—Ä—Ç—ã 3, 1, 6) -->
        <div class="situation-cards-row">
          <div class="situation-card-slot" data-index="2">
            <!-- –ö–∞—Ä—Ç–∞: –ü—Ä–æ—à–ª–æ–µ ‚Äî –∞—Å—Ç—Ä–∞–ª—å–Ω—ã–π -->
          </div>
          <div class="situation-card-slot situation-card-center" data-index="0">
            <!-- –ö–∞—Ä—Ç–∞: –°—É—Ç—å –≤–æ–ø—Ä–æ—Å–∞ -->
          </div>
          <div class="situation-card-slot" data-index="5">
            <!-- –ö–∞—Ä—Ç–∞: –ë—É–¥—É—â–µ–µ ‚Äî –∞—Å—Ç—Ä–∞–ª—å–Ω—ã–π -->
          </div>
        </div>
        
        <!-- –†—è–¥ 3: —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —É—Ä–æ–≤–µ–Ω—å (–∫–∞—Ä—Ç—ã 4 –∏ 5) -->
        <div class="situation-cards-row">
          <div class="situation-card-slot" data-index="3">
            <!-- –ö–∞—Ä—Ç–∞: –ü—Ä–æ—à–ª–æ–µ ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π -->
          </div>
          <div class="situation-card-slot" data-index="4">
            <!-- –ö–∞—Ä—Ç–∞: –ë—É–¥—É—â–µ–µ ‚Äî —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π -->
          </div>
        </div>
      </div>
      
      <div class="result-actions" id="situation-actions" style="display: none;">
        <button class="share-btn" id="situation-share-btn">üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å —Ç–∞—Ä–æ–ª–æ–≥–æ–º</button>
        <button class="new-spread-btn" id="situation-new-btn">üîÑ –ù–æ–≤—ã–π —Ä–∞—Å–∫–ª–∞–¥</button>
      </div>
    </section>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
    <div class="modal" id="settings-modal">
      <div class="modal-content">
        <h3 class="modal-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h3>

        <div class="setting-item">
          <span class="setting-label">–ó–≤—É–∫ —Ç–∞—Å–æ–≤–∫–∏</span>
          <label class="toggle">
            <input type="checkbox" id="sound-toggle" checked>
            <span class="slider"></span>
          </label>
        </div>

        <button class="modal-close" id="settings-close">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>

    <!-- ========================================
         –≠–ö–†–ê–ù –í–´–ë–û–†–ê –¢–ê–†–û–õ–û–ì–ê
         ======================================== -->
    <section id="screen-tarologists" class="screen">
      <h2 class="screen-title">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–æ–ª–æ–≥–∞</h2>

      <div class="tarologists-list" id="tarologists-list">
        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ —Ç–∞—Ä–æ–ª–æ–≥–æ–≤ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>

      <div class="tarologist-loading" id="tarologists-loading">
        <div class="loading-spinner"></div>
        <p>–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–∞—Ä–æ–ª–æ–≥–æ–≤...</p>
      </div>

      <button class="back-btn" id="back-to-spreads-tarologists">‚Üê –ù–∞–∑–∞–¥</button>
    </section>

    <!-- ========================================
         –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ü–û–î–¢–í–ï–†–ñ–î–ï–ù–ò–Ø –û–ü–õ–ê–¢–´
         ======================================== -->
    <div class="modal" id="payment-modal">
      <div class="modal-content modal-payment">
        <h3 class="modal-title">–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –æ–ø–ª–∞—Ç—ã</h3>
        
        <div class="payment-info">
          <div class="payment-row">
            <span class="payment-label">–¢–∞—Ä–æ–ª–æ–≥:</span>
            <span class="payment-value" id="payment-tarologist-name">‚Äî</span>
          </div>
          <div class="payment-row">
            <span class="payment-label">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</span>
            <span class="payment-value">25 –º–∏–Ω—É—Ç</span>
          </div>
          <div class="payment-row payment-total">
            <span class="payment-label">–°—Ç–æ–∏–º–æ—Å—Ç—å:</span>
            <span class="payment-value stars-amount" id="payment-stars-amount">0 ‚≠ê</span>
          </div>
        </div>

        <p class="payment-disclaimer">
          –í—ã —Å–æ–≥–ª–∞—à–∞–µ—Ç–µ—Å—å –æ–ø–ª–∞—Ç–∏—Ç—å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É —Ä–∞—Å–∫–ª–∞–¥–∞ –∂–∏–≤—ã–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º.
          –û–ø–ª–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ Telegram Stars.
        </p>

        <div class="payment-buttons">
          <button class="payment-cancel-btn" id="payment-cancel-btn">–û—Ç–º–µ–Ω–∞</button>
          <button class="payment-confirm-btn" id="payment-confirm-btn">
            <span class="btn-stars">‚≠ê</span> –û–ø–ª–∞—Ç–∏—Ç—å
          </button>
        </div>
      </div>
    </div>

    <!-- ========================================
         –≠–ö–†–ê–ù –ß–ê–¢–ê –° –¢–ê–†–û–õ–û–ì–û–ú
         ======================================== -->
    <section id="screen-chat" class="screen">
      <div class="chat-header">
        <div class="chat-tarologist-info">
          <img src="" alt="" class="chat-tarologist-avatar" id="chat-tarologist-avatar">
          <div class="chat-tarologist-name">
            <span id="chat-tarologist-name">‚Äî</span>
            <span class="chat-status" id="chat-status">–æ–Ω–ª–∞–π–Ω</span>
          </div>
        </div>
        <div class="chat-timer" id="chat-timer">
          <span class="timer-icon">‚è≥</span>
          <span class="timer-value" id="timer-value">25:00</span>
        </div>
      </div>

      <div class="chat-messages" id="chat-messages">
        <!-- –°–æ–æ–±—â–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
      </div>

      <div class="chat-input-container" id="chat-input-container">
        <input 
          type="text" 
          class="chat-input" 
          id="chat-input" 
          placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ..."
          maxlength="500"
        >
        <button class="chat-send-btn" id="chat-send-btn">
          <svg viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>

      <div class="chat-timeout-message" id="chat-timeout-message" style="display: none;">
        <p>‚è∞ –í—Ä–µ–º—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –≤—ã—à–ª–æ</p>
        <p class="timeout-subtext">–ü–µ—Ä–µ—Ö–æ–¥ –∫ –æ—Ü–µ–Ω–∫–µ...</p>
      </div>
    </section>

    <!-- ========================================
         –≠–ö–†–ê–ù –û–¶–ï–ù–ö–ò –¢–ê–†–û–õ–û–ì–ê
         ======================================== -->
    <section id="screen-rating" class="screen">
      <div class="rating-container">
        <div class="rating-icon">‚ú®</div>
        <h2 class="rating-title">–û—Ü–µ–Ω–∏—Ç–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é</h2>
        <p class="rating-subtitle">–í–∞—à –æ—Ç–∑—ã–≤ –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —Å–µ—Ä–≤–∏—Å</p>

        <div class="stars-rating" id="stars-rating">
          <button class="star-btn" data-rating="1">‚òÜ</button>
          <button class="star-btn" data-rating="2">‚òÜ</button>
          <button class="star-btn" data-rating="3">‚òÜ</button>
          <button class="star-btn" data-rating="4">‚òÜ</button>
          <button class="star-btn" data-rating="5">‚òÜ</button>
        </div>

        <p class="selected-rating-text" id="selected-rating-text"></p>

        <button class="submit-rating-btn" id="submit-rating-btn" disabled>
          –û—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ü–µ–Ω–∫—É
        </button>

        <button class="back-to-main-rating-btn" id="back-to-main-rating-btn" style="display: none;">
          –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Ä–∞—Å–∫–ª–∞–¥–∞–º
        </button>
      </div>
    </section>

    <!-- ========================================
         –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –£–°–ü–ï–®–ù–û–ô –û–ü–õ–ê–¢–´
         ======================================== -->
    <div class="modal" id="payment-success-modal">
      <div class="modal-content modal-success">
        <div class="success-icon">‚úÖ</div>
        <h3 class="modal-title">–û–ø–ª–∞—Ç–∞ —É—Å–ø–µ—à–Ω–∞!</h3>
        <p class="success-text">
          –¢–∞—Ä–æ–ª–æ–≥ —É–≤–µ–¥–æ–º–ª—ë–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏.
        </p>
        <button class="modal-close start-chat-btn" id="start-chat-btn">
          –ù–∞—á–∞—Ç—å —á–∞—Ç
        </button>
      </div>
    </div>
  </div>

  <script type="module" src="js/main.js"></script>
  <script type="module">
    // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –º–æ–¥—É–ª—å —Ç–∞—Ä–æ–ª–æ–≥–æ–≤
    import { initTarologists } from './js/tarologists.js';
    initTarologists();
  </script>
</body>
</html>
