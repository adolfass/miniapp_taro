# Tarot Mini App — Контекст проекта

## Обзор проекта

**Telegram Mini App для гадания на картах Таро** — мистическое веб-приложение с фокусом на визуальное восприятие карт, плавные анимации (120 Гц) и карточную механику.

### Ключевые особенности
- Два расклада: ежедневный (3 карты) и на ситуацию (7 карт)
- Оригинальная рубашка карт в мистическом стиле
- Звук перетасовки карт + возможность отключения
- Встряхивание телефона как альтернатива кнопке (имитация броска костей)
- Частицы (sparkles) при перевороте карт
- Интеграция с Telegram WebApp API

## Технический стек

| Компонент | Технология |
|-----------|------------|
| Язык | Vanilla JavaScript (ES6+) |
| Сборщик | Vite |
| Стили | CSS3 с аппаратным ускорением |
| Анимации | `transform`, `opacity`, Canvas для частиц |
| Изображения | WebP |
| Платформа | Telegram WebApp |

## Структура проекта

```
miniapp/
├── public/
│   ├── index.html
│   ├── css/style.css
│   ├── js/
│   │   ├── main.js          # Точка входа, Telegram WebApp
│   │   ├── cards.js         # Данные 78 карт
│   │   ├── deck.js          # Логика колоды
│   │   ├── spreads.js       # Расклады
│   │   ├── animations.js    # Анимации + Canvas частицы
│   │   ├── sound.js         # Управление звуком
│   │   └── shake.js         # Детекция встряхивания
│   └── assets/
│       ├── card-backs/back.webp
│       ├── card-faces/      # Изображения карт
│       └── sounds/shuffle.mp3
├── package.json
├── vite.config.js
└── AGENTS.md                # Полная спецификация
```

## Команды разработки

> ⚠️ Проект находится на начальной стадии. Структура и команды будут актуализированы после инициализации.

```bash
# Установка зависимостей
npm install

# Запуск dev-сервера
npm run dev

# Сборка продакшена
npm run build

# Предпросмотр сборки
npm run preview
```

## Дизайн-система

### Цветовая палитра
- Фон: `#1a0b2e` (глубокий фиолетовый)
- Акцент: `#d4af37` (золото)
- Текст: светлые тона с полупрозрачностью

### Шрифты
- Заголовки: `'Cormorant Garamond', serif` или `'Cinzel', serif`
- Основной текст: системный шрифт

### Анимации
- Переворот: `transform: rotateY(180deg)` + `translateZ(0)`
- Все анимации на `transform` и `opacity` для 120 Гц
- `will-change: transform` на карточках

## Интеграция с Telegram

```javascript
import WebApp from 'https://telegram.org/js/telegram-web-app.js'

// Основные методы
tg.expand()                    // На весь экран
tg.colorScheme                 // 'dark' | 'light'
tg.sendData(data)              // Отправка боту
tg.HapticFeedback.impactOccurred('medium')
tg.showAlert(message)          // Уведомление
```

## Требования к разработке

1. **Без фреймворков** — полный контроль над анимациями
2. **ES6-модули** — `import/export`
3. **Аппаратное ускорение** — `translateZ(0)`, `will-change`
4. **Оптимизация** — WebP, lazy loading, code splitting
5. **iOS-совместимость** — обработка `DeviceMotionEvent.requestPermission()`
6. **Мок для локальной разработки** — эмуляция Telegram API

## Расклады

### Ежедневный (3 карты)
1. Случайная выборка 3 карт
2. Переворот по тапу
3. Краткое толкование под каждой
4. Кнопка «Поделиться с тарологом»

### На ситуацию (7 карт)
1. Таймер 5 секунд на концентрацию
2. Активация: кнопка **или** встряхивание
3. Раскладка: 3 карты сверху + 4 снизу
4. Общее толкование с учётом позиций

## Следующие шаги

1. Инициализация проекта (`npm init`, установка Vite)
2. Создание базовой структуры файлов
3. Реализация `cards.js` с данными Старших Арканов (22 карты)
4. Вёрстка главного экрана с колодой
5. Анимация переворота карт
